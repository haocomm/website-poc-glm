import ee from"./Dj0sbWsm.js";import{_ as ae}from"./B2jv10bl.js";import{_ as be,s as ye,B as C,o,w as A,a as O,c as m,q as f,b as M,D as R,A as S,C as k,n as i,F as ve,i as Me,T as he,H as ne,I as T,x as t,r as Ie,a1 as Ce,J as Ae,L as p,a2 as K,a3 as Y,X as Oe,P as q,O as Se,W as ke,t as W,d as Z,M as qe}from"./rXjCf5nY.js";import{i as Be,r as Ve,u as we,n as ze,l as He}from"./CXXN5jSa.js";import{s as $e}from"./NvVY9mVC.js";import{d as je}from"./CUlfEDMs.js";import{u as _,i as Ne,a as Ue}from"./CqixAVAd.js";import{u as Fe}from"./CSJIG61V.js";import{u as Ee}from"./B7T39L2X.js";import{a as Le}from"./DVbDOtTj.js";import{i as x}from"./BJ2ClxiI.js";import"./LRZgX-Ci.js";import"./CVTE_SIr.js";import"./Bm92f-5u.js";import"./CxIZtCgj.js";import"./BqNqVi9c.js";import"./7ezJ8D-b.js";import"./DVzxGEiD.js";import"./Df9IDi73.js";import"./Cym1VOnw.js";import"./2cLrE68T.js";const c=ne(p.ui.strategy,p.ui.input,Ne),G=ne(p.ui.strategy,p.ui.inputMenu,Ue),De=ye({components:{HCombobox:He,HComboboxButton:ze,HComboboxOptions:we,HComboboxOption:Ve,HComboboxInput:Be,UIcon:ee,UAvatar:ae},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>c.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>G.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>G.default.selectedIcon},disabled:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(c.size).includes(e)}},color:{type:String,default:()=>c.default.color,validator(e){return[...p.ui.colors,...Object.keys(c.color)].includes(e)}},variant:{type:String,default:()=>c.default.variant,validator(e){return[...Object.keys(c.variant),...Object.values(c.color).flatMap(g=>Object.keys(g))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},search:{type:Function,default:void 0},searchAttributes:{type:Array,default:null},searchLazy:{type:Boolean,default:!1},debounce:{type:Number,default:200},popper:{type:Object,default:()=>({})},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:g,slots:z}){const{ui:n,attrs:Q}=_("input",T(e,"ui"),c,T(e,"class")),{ui:H}=_("inputMenu",T(e,"uiMenu"),G),B=t(()=>Oe({},e.popper,H.value.popper)),[b,V]=Fe(B.value),{size:$,rounded:j}=Le({ui:n,props:e}),{emitFormBlur:N,emitFormChange:U,inputId:F,color:l,size:E,name:h}=Ee(e,c),r=t(()=>$.value??E.value),I=t(()=>{if(!e.by)return;if(typeof e.by=="function")return e.by;const a=e.by;return a.indexOf(".")>0?(u,s)=>v(u,a)===v(s,a):a}),P=Ie(""),y=t({get(){return e.query??P.value},set(a){P.value=a,g("update:query",a)}});function J(a){return!Array.isArray(a)&&a!==null&&typeof a=="object"}const le=t(()=>{if(!e.modelValue)return null;function a(u){return e.valueAttribute?v(u,e.valueAttribute):u}function d(u,s){return I.value&&typeof I.value!="function"&&J(u)&&J(s)?x(u[e.by],s[e.by]):x(u,s)}if(e.valueAttribute){const u=D.value.find(s=>{const pe=a(s);return d(pe,e.modelValue)});return u?v(u,e.optionAttribute):null}else return["string","number"].includes(typeof e.modelValue)?e.modelValue:v(e.modelValue,e.optionAttribute)}),ie=t(()=>{const a=n.value.color?.[l.value]?.[e.variant]||n.value.variant[e.variant];return Se(q(n.value.base,n.value.form,j.value,n.value.placeholder,n.value.size[r.value],e.padded?n.value.padding[r.value]:"p-0",a?.replaceAll("{color}",l.value),(w.value||z.leading)&&n.value.leading.padding[r.value],(X.value||z.trailing)&&n.value.trailing.padding[r.value]),e.inputClass)}),w=t(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),X=t(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),te=t(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),ue=t(()=>e.loading&&!w.value?e.loadingIcon:e.trailingIcon||e.icon),oe=t(()=>q(n.value.icon.leading.wrapper,n.value.icon.leading.pointer,n.value.icon.leading.padding[r.value])),re=t(()=>q(n.value.icon.base,l.value&&p.ui.colors.includes(l.value)&&n.value.icon.color.replaceAll("{color}",l.value),n.value.icon.size[r.value],e.loading&&n.value.icon.loading)),se=t(()=>q(n.value.icon.trailing.wrapper,n.value.icon.trailing.padding[r.value])),de=t(()=>q(n.value.icon.base,l.value&&p.ui.colors.includes(l.value)&&n.value.icon.color.replaceAll("{color}",l.value),n.value.icon.size[r.value],e.loading&&!w.value&&n.value.icon.loading)),L=e.search&&typeof e.search=="function"?Ce(e.search,e.debounce):void 0,D=je(async()=>L?await L(y.value):e.options||[],[],{lazy:e.searchLazy});function ce(a){return a.replace(/[.*+?^${}()|[\]\\]/g,d=>`\\${d}`)}const ge=t(()=>{if(!y.value||L)return D.value;const a=ce(y.value);return D.value.filter(d=>(e.searchAttributes?.length?e.searchAttributes:[e.optionAttribute]).some(u=>{if(["string","number"].includes(typeof d))return String(d).search(new RegExp(a,"i"))!==-1;const s=Y(d,u);return s!=null&&String(s).search(new RegExp(a,"i"))!==-1}))});Ae(V,a=>{a?g("open"):(g("close"),N())});function me(a){y.value="",K(e.modelValue)!==K(a)&&(g("update:modelValue",a),g("change",a),U())}function v(a,d){return Y(a,d)}function fe(a){y.value=a.target.value}return $e(()=>qe()),{ui:n,uiMenu:H,attrs:Q,name:h,inputId:F,popper:B,trigger:b,container:V,label:le,isLeading:w,isTrailing:X,inputClass:ie,leadingIconName:te,leadingIconClass:re,leadingWrapperIconClass:oe,trailingIconName:ue,trailingIconClass:de,trailingWrapperIconClass:se,filteredOptions:ge,query:y,accessor:v,onUpdate:me,onQueryChange:fe,by:I}}}),Re={class:"truncate"};function Te(e,g,z,n,Q,H){const B=S("HComboboxInput"),b=ee,V=S("HComboboxButton"),$=ae,j=S("HComboboxOption"),N=S("HComboboxOptions"),U=S("HCombobox");return o(),C(U,{by:e.by,name:e.name,"model-value":e.modelValue,disabled:e.disabled,nullable:e.nullable,as:"div",class:i(e.ui.wrapper),"onUpdate:modelValue":e.onUpdate},{default:A(({open:F})=>[O("div",{class:i(e.uiMenu.trigger)},[M(B,R({id:e.inputId,name:e.name,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass,autocomplete:"off"},e.attrs,{"display-value":()=>e.query?e.query:e.label,onChange:e.onQueryChange}),null,16,["id","name","required","placeholder","disabled","class","display-value","onChange"]),e.isLeading&&e.leadingIconName||e.$slots.leading?(o(),m("span",{key:0,class:i(e.leadingWrapperIconClass)},[k(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[M(b,{name:e.leadingIconName,class:i(e.leadingIconClass)},null,8,["name","class"])])],2)):f("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(o(),C(V,{key:1,ref:"trigger",class:i(e.trailingWrapperIconClass)},{default:A(()=>[k(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[M(b,{name:e.trailingIconName,class:i(e.trailingIconClass)},null,8,["name","class"])])]),_:3},8,["class"])):f("",!0)],2),F?(o(),m("div",{key:0,ref:"container",class:i([e.uiMenu.container,e.uiMenu.width])},[M(he,R({appear:""},e.uiMenu.transition),{default:A(()=>[O("div",null,[e.popper.arrow?(o(),m("div",{key:0,"data-popper-arrow":"",class:i(Object.values(e.uiMenu.arrow))},null,2)):f("",!0),M(N,{static:"",class:i([e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height])},{default:A(()=>[(o(!0),m(ve,null,Me(e.filteredOptions,(l,E)=>(o(),C(j,{key:E,as:"template",value:e.valueAttribute?e.accessor(l,e.valueAttribute):l,disabled:l.disabled},{default:A(({active:h,selected:r,disabled:I})=>[O("li",{class:i([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,h?e.uiMenu.option.active:e.uiMenu.option.inactive,r&&e.uiMenu.option.selected,I&&e.uiMenu.option.disabled])},[O("div",{class:i(e.uiMenu.option.container)},[k(e.$slots,"option",{option:l,active:h,selected:r},()=>[l.icon?(o(),C(b,{key:0,name:l.icon,class:i([e.uiMenu.option.icon.base,h?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,l.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):l.avatar?(o(),C($,R({key:1,ref_for:!0},{size:e.uiMenu.option.avatar.size,...l.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):l.chip?(o(),m("span",{key:2,class:i(e.uiMenu.option.chip.base),style:ke({background:`#${l.chip}`})},null,6)):f("",!0),O("span",Re,W(["string","number"].includes(typeof l)?l:e.accessor(l,e.optionAttribute)),1)])],2),r?(o(),m("span",{key:0,class:i([e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding])},[M(b,{name:e.selectedIcon,class:i(e.uiMenu.option.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])],2)):f("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.query&&!e.filteredOptions.length?(o(),m("p",{key:0,class:i(e.uiMenu.option.empty)},[k(e.$slots,"option-empty",{query:e.query},()=>[Z(W(e.uiMenu.default.optionEmpty.label.replace("{query}",e.query)),1)])],2)):e.filteredOptions.length?f("",!0):(o(),m("p",{key:1,class:i(e.uiMenu.empty)},[k(e.$slots,"empty",{query:e.query},()=>[Z(W(e.uiMenu.default.empty.label),1)])],2))]),_:3},8,["class"])])]),_:3},16)],2)):f("",!0)]),_:3},8,["by","name","model-value","disabled","nullable","class","onUpdate:modelValue"])}const da=be(De,[["render",Te]]);export{da as default};
